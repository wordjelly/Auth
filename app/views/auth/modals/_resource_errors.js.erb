mark_all_input_fields_valid();
<% if resource.errors.size > 0 %>
	<% resource.errors.each do |attrib,message| %>
		<% if attrib =~ /recaptcha/ %>
			show_modal_error_message("<%= escape_javascript(message) %>");
		<% else %>
			var resource_name = "<%= resource.class.name.underscore %>";
			var attribute_name = "<%= attrib %>";
			
			//if its additional_login_param
			//then change it to user_login and user_email,
			//and cycle both to show the error, since in the registration and sign in form the name of the field is user_login
			//and in the forgot_password and unlocks forms, the name of the field is user_email.
			if(attribute_name == "additional_login_param"){
				if($("#" + resource_name + "_email").length > 0){
					attribute_name = "email";
				}
				else if($("#" + resource_name + "_login").length > 0){
					attribute_name = "login";
				}
			}
			var field_id = resource_name + "_" + attribute_name;
			var message = "<%= message.html_safe %>";
			invalidate_input_field(field_id,"<%= message.html_safe %>");
		<% end %>
	<% end %>
<% end %>