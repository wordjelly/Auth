mark_all_input_fields_valid();
<% if resource.errors.size > 0 %>
	<% resource.errors.each do |attrib,message| %>
		<% if attrib =~ /recaptcha/ %>
			show_modal_error_message("<%= escape_javascript(message) %>");
		<% else %>
			var resource_name = "<%= resource.class.name.underscore %>";
			var field_id = resource_name + "_" + "<%= attrib %>";
			var message = "<%= message.html_safe %>";
			invalidate_input_field(field_id,"<%= message.html_safe %>");
		<% end %>
	<% end %>
<% else %>
	$("#login_title").html("Sign Up Successfull");
	var resource_active = "<%= resource.active_for_authentication? %>";
	if(resource_active === "true"){
		$("#login_footer").html("Redirecting you to your Profile").show();
		window.location.href = "<%= profile_path(resource.id) %>";
	}
	else{
		$("#login_content").html("<%= escape_javascript(render partial: 'auth/modals/sign_up_success_inactive_content.html.erb', locals: {res: resource}) %>").show();
		$("#login_footer").html("<%= escape_javascript(render partial: 'auth/modals/login_navigation_options.html.erb') %>").show();
		$("#show_sign_up").hide();
		$("#forgot_password").hide();
		$("#resend_confirmation_email").show();
	}
	open_sign_in_modal_if_closed();
<% end %>